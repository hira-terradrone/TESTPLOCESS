全ファイルダウンロード完了を待たずに、ダウンロードが完了したファイルからアップロードをおこなっていくプログラムです。
流れ的には
<ダウンロード側>
ファイルを指定フォルダーにダウンロード　→　ダウンロード完了したファイルには"Done_"をファイル名に付ける　→ 次のファイルをダウンロード
<アップロード側>
指定フォルダを監視　→ フォルダー内に"Done_"ファイルができたらパスを取得　→　排他処理場少し待つ　→ "Done_"ファイルをアップロード　→　監視に戻る

このサンプルでは
ダウンロード処理をファイル作成処理
アップロード処理をファイルの保存場所変更処理
と置き換えて作成しています